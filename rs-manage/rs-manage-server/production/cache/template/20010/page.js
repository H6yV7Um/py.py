oojs.define({name:"page",namespace:"20010",deps:{},sdk:{},mobInterface:{},downloadingIntervel:null,adsExtention:[],$page:function(){var b=this.getAttr(this.getEleById("item0"),"data-mcurl");var d=this.getAttr(this.getEleById("item0"),"mcurl-val");var a=this.getEleById("item0").href;var g=this.getAttr(this.getEleById("item0"),"data-ispause");var f=this.getAttr(this.getEleById("item0"),"data-adtype");try{this.sdk=(window.baidu&&window.baidu.mobads&&window.baidu.mobads.Sdk)||(parent&&parent.baidu&&parent.baidu.mobads&&parent.baidu.mobads.Sdk);this.bindCloseHandler();this.mobInterface=(window.baidu&&window.baidu.mobads&&window.baidu.mobads.Interface)||(parent&&parent.baidu&&parent.baidu.mobads&&parent.baidu.mobads.Interface);if(g&&typeof d==="string"&&d!=="null"){this.sdk&&this.sdk.getDownloadStatus&&this.handlePkgStatus(false);this.changeStyle();this.leftClick();this.rightClick()}else{if(g&&typeof d==="object"){this.sdk&&this.sdk.getDownloadStatus&&this.handlePkgStatus(false);this.leftClick();this.rightClick()}else{if(!g&&d!=="null"){if(window.adsExtention&&document.getElementById("container")){this.adClick("container",window.adsExtention)}}else{if(typeof d==="string"&&d!=="null"){this.adClick("container",window.adsExtention);this.changeStyle();this.bindLpHandler();this.bindDownHandler(a)}else{return}}}}}catch(c){var e="http://mobads-logs.baidu.com/dz.zb?type="+536+"&qk="+this.getQueryString(a,"qk")+"&rs_tplid="+2004+"&zone="+1+"&chg_tp="+this.getQueryString(a,"chg_tp")+"&tpl_id="+this.getQueryString(a,"tpl_id")+"&adid="+this.getQueryString(a,"adid")+"&appsid="+this.getQueryString(a,"appsid")+"&emsg="+c.message+"&T="+new Date().getTime();this.sendByImage(e)}},getEleById:function(a){return document.getElementById(a)},bindCloseHandler:function(){var a=document.getElementById("closeBtn");if(a&&this.sdk&&this.sdk.AdCloseAvailable&&this.sdk.AdCloseAvailable()){this.bind(a,"click",this.sdk.onAdPlayEnd)}else{a.style.display="none"}},adClick:function(b,e){this.adsExtention=e||window.adsExtention;b=b||"container";var a=document.getElementById(b);var f=a.getElementsByTagName("a");for(var c=0;c<f.length;c++){var d=f[c].className;if(d){d=d.toLowerCase();if(d==="gylogo"||d==="bdlogo"||d.substring(0,7)==="bd-logo"){continue}}this.bind(f[c],"click",this.onAdClick.proxy(this))}},onAdClick:function(b){var g=this.formatEventObj(b);var c=g.target;while(c.tagName.toLowerCase()!=="a"&&c.tagName.toLowerCase()!=="body"){c=c.parentNode}var i=this.getAttr(c,"data-adindex");var d=this.getAttr(c,"data-adtype");var f=this.getAttr(c,"id");i=parseInt(i,10);d=parseInt(d,10);var j=this.getAttr(this.getEleById("item0"),"data-ispause");var a=this.getAttr(this.getEleById("item0"),"mcurl-val");var h=window.adsExtention[i];if(a&&a!=="null"){if(d===5){if(f==="item0"){h.act=4}if(f==="item_btn_0"){h.act=2}}}h.curl=c.href||h.curl;this.sdk.handleClick(h);return this.stopEvent(b)},bind:function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{a.attachEvent("on"+c,b)}},getAttr:function(b,a){if(b&&b.getAttribute){return b.getAttribute(a)}else{return b[a]}},formatEventObj:function(a){a=a||window.event;a.target=a.target||a.srcElement;return a},stopEvent:function(a){if(a&&a.stopPropagation){a.stopPropagation()}else{window.event.cancelBubble=true}if(a&&a.preventDefault){a.preventDefault()}return false},sendByImage:function(b,d){var a=new Image();var c="cpro_log_"+Math.floor(Math.random()*2147483648).toString(36);d=d||window;d[c]=a;a.onload=a.onerror=a.onabort=function(){a.onload=a.onerror=a.onabort=null;d[c]=null;a=null};a.src=b},getQueryString:function(a,c){var b=new RegExp("(^|&)"+c+"=([^&]*)(&|$)","i");if(a.indexOf("?")>-1){var e=a.substr(a.indexOf("?")+1);var d=e.match(b);if(d!==null){return unescape(d[2])}}return null},addEvent:function(c,b,a){b=b.replace(/^on/i,"").toLowerCase();if(c.addEventListener){c.addEventListener(b,a,false)}else{c.attachEvent("on"+b,function(){a(window.event)})}},resTag:function(a){var a=a.parentNode;if(a.tagName.toLowerCase()!=="a"&&a.tagName.toLowerCase()!=="body"){return this.resTag(a)}return a},bindLpHandler:function(){var c=this;var b="http://mobads-logs.baidu.com/dz.zb?";var a=document.getElementById("item0");c.bind(a,"click",function(f){try{var f=f||window.event;var g=f.target||f.srcElement;if(g.tagName.toLowerCase()!=="a"){g=c.resTag(g)}var d=g.href;var h=b+"type="+534+"&qk="+c.getQueryString(d,"qk")+"&rs_tplid="+2004+"&zone="+1+"&chg_tp="+c.getQueryString(d,"chg_tp")+"&tpl_id="+c.getQueryString(d,"tpl_id")+"&adid="+c.getQueryString(d,"adid")+"&appsid="+c.getQueryString(d,"appsid")+"&T="+new Date().getTime();c.sendByImage(h)}catch(e){var h=b+"type="+536+"&qk="+c.getQueryString(d,"qk")+"&rs_tplid="+2004+"&zone="+1+"&chg_tp="+c.getQueryString(d,"chg_tp")+"&tpl_id="+c.getQueryString(d,"tpl_id")+"&adid="+c.getQueryString(d,"adid")+"&appsid="+c.getQueryString(d,"appsid")+"&emsg="+e.message+"&T="+new Date().getTime();c.sendByImage(h)}})},bindDownHandler:function(c){var a=c;var e=this;var d="http://mobads-logs.baidu.com/dz.zb?";var b=document.getElementById("item_btn_0");e.bind(b,"click",function(h){try{var h=h||window.event;var i=h.target||h.srcElement;var f=d+"type="+535+"&qk="+e.getQueryString(a,"qk")+"&rs_tplid="+2004+"&zone="+2+"&chg_tp="+e.getQueryString(a,"chg_tp")+"&tpl_id="+e.getQueryString(a,"tpl_id")+"&adid="+e.getQueryString(a,"adid")+"&appsid="+e.getQueryString(a,"appsid")+"&T="+new Date().getTime();e.sendByImage(f)}catch(g){var f=d+"type="+536+"&qk="+e.getQueryString(a,"qk")+"&rs_tplid="+2004+"&zone="+2+"&chg_tp="+e.getQueryString(a,"chg_tp")+"&tpl_id="+e.getQueryString(a,"tpl_id")+"&adid="+e.getQueryString(a,"adid")+"&appsid="+e.getQueryString(a,"appsid")+"&emsg="+g.message+"&T="+new Date().getTime();e.sendByImage(f)}})},changeStyle:function(){var c=document.getElementById("bd-logo");var a=document.getElementById("mob-bd-adIcon");var b=document.getElementById("logoArea");if(c){c.style.bottom=0;c.style.left=0}if(a){a.style.bottom=0;a.style.left=14+"px"}if(b){b.style.bottom=0;b.style.left=14+"px"}},leftClick:function(){var c=this;var a=c.getEleById("item0");var d=c.getAttr(c.getEleById("item0"),"data-ispause");var b=c.getAttr(c.getEleById("item0"),"mcurl-val");c.bind(a,"click",function(e){c.mobInterface&&c.mobInterface.pause&&c.mobInterface.pause();var f=e.target||e.srcElement;if(d){if(typeof b==="string"){c.download(e)}if(typeof b==="object"){c.handleDownload(e)}}})},rightClick:function(){var b=this;var a=b.getEleById("item_btn_0");b.bind(a,"click",function(c){b.mobInterface&&b.mobInterface.pause&&b.mobInterface.pause();b.handleDownload(c)})},handleDownload:function(a){a.preventDefault();a.stopPropagation();if(this.sdk&&this.sdk.getDownloadStatus){this.handlePkgStatus(true,a)}else{this.download()}},handlePkgStatus:function(a,e){var d=e;var f=this;for(var c=0;c<window.adsExtention.length;c++){var b=window.adsExtention[c].pk}if(typeof b==="string"){f.sdk&&f.sdk.getDownloadStatus(function(h){var i=JSON.parse(h);var g=i.status;if(a){if(g===102||g===103){f.download(d)}else{if(g===101){f.download(d);f.addLoadImg(i);clearInterval(f.downloadingIntervel);f.downloadingIntervel=setInterval(f.updateDownloadingContent.proxy(f),2000)}else{if(g<=100&&g>=0){if(i.isPaused===0){f.mobInterface&&f.mobInterface.play&&f.mobInterface.play();f.sdk.pauseDownload(b);clearInterval(f.downloadingIntervel);f.getEleById("item_btn_0").innerHTML="\u7ee7\u7eed";f.getEleById("item_btn_0").style.background="#2e83f7"}else{if(i.isPaused===1){f.download(d);f.addLoadImg(i);clearInterval(f.downloadingIntervel);f.downloadingIntervel=setInterval(f.updateDownloadingContent.proxy(f),2000)}}}}}}else{if(g===102){f.getEleById("item_btn_0").innerHTML="\u5b89\u88c5";f.getEleById("item_btn_0").style.background="#2e83f7"}else{if(g===103){f.getEleById("item_btn_0").innerHTML="\u6253\u5f00";f.getEleById("item_btn_0").style.background="#2e83f7"}else{if(g<=100&&g>=0){f.getEleById("item_btn_0").innerHTML=g+"%";f.getEleById("item_btn_0").style.background="#2e83f7";if(i.isPaused===0){clearInterval(f.downloadingIntervel);f.downloadingIntervel=setInterval(f.updateDownloadingContent.proxy(f),2000)}else{if(i.isPaused===1){f.getEleById("item_btn_0").innerHTML="\u7ee7\u7eed";f.getEleById("item_btn_0").style.background="#2e83f7"}}}}}}},b)}},updateDownloadingContent:function(){var c=this;for(var b=0;b<window.adsExtention.length;b++){var a=window.adsExtention[b].pk}c.sdk&&c.sdk.getDownloadStatus(function(e){var f=JSON.parse(e);var d=f.status;if(d<=100&&d>=0){c.getEleById("item_btn_0").innerHTML=d+"%";c.getEleById("item_btn_0").style.background="#2e83f7";return}if(d===102){clearInterval(c.downloadingIntervel);c.getEleById("item_btn_0").innerHTML="\u5b89\u88c5";c.getEleById("item_btn_0").style.background="#2e83f7"}},a)},download:function(k){var i=this;var f=i.formatEventObj(k);var b=f.target;while(b.tagName.toLowerCase()!=="a"&&b.tagName.toLowerCase()!=="body"){b=b.parentNode}var g=i.getAttr(b,"data-adindex");var d=i.getAttr(b,"id");var c=i.getAttr(b,"data-adtype");c=parseInt(c,10);g=parseInt(g,10);var h=window.adsExtention[g];var j=document.getElementById("item0").getAttribute("data-ispause");var a=document.getElementById("item0").getAttribute("mcurl-val");if(j){if(typeof a==="string"&&a!=="null"){if(c===5){if(d==="item0"){h.act=1}if(d==="item_btn_0"){h.act=2}}}if(typeof a==="object"){if(c===5){if(d==="item0"){h.act=2}if(d==="item_btn_0"){h.act=2}}}}h.curl=b.href||h.curl;i.sdk.handleClick(h);return i.stopEvent(k)},addLoadImg:function(a){var d=this;var b=d.getEleById("item0").href;var c="http://mobads-logs.baidu.com/dz.zb?type="+535+"&qk="+d.getQueryString(b,"qk")+"&rs_tplid="+2004+"&zone="+2+"&chg_tp="+d.getQueryString(b,"chg_tp")+"&tpl_id="+d.getQueryString(b,"tpl_id")+"&adid="+d.getQueryString(b,"adid")+"&appsid="+d.getQueryString(b,"appsid")+"&isPaused="+a.isPaused+"&T="+new Date().getTime();d.sendByImage(c)}});