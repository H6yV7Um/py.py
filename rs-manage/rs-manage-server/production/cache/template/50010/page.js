var ImageSlider=function(b,a){a=a||{};this.$slider=b;this.options={speed:a.speed||500,minDistance:a.minDistance||15,showBullets:a.showBullets||true,active:a.active||0,interval:a.interval||5000,isSendWin:a.isSendWin||true};this.$images=[].slice.call(this.$slider.getElementsByTagName("li"));this.active=this.options.active;this.init()};ImageSlider.prototype={init:function(){this.prepareGesturesConainer();this.prepareBullets();this.startSwipes()},prepareBullets:function(){var b=this;if(b.options.showBullets){var a=b.$slider.parentNode;var f=document.createElement("ul");b.$bulletsContainer=f;f.className="item-circle";a.appendChild(f);var d=b.$images.length;var g=parseInt(a.clientWidth,10);f.style.marginLeft=(g-d*18)/2+"px";var c;b.$labels=[];for(var e=0;e<d;e++){c=document.createElement("li");f.appendChild(c);if(e===b.options.active){c.className="current"}b.$labels.push(c)}}},prepareGesturesConainer:function(){var a=this.$images.length;var f=this.$images[a-1];var d=this.$images[0];var b=f.parentNode;var c=f.cloneNode(true);c.id="nodeFirst";this.$slideContainer=b;var e=d.cloneNode(true);e.id="nodeTail";b.insertBefore(c,d);b.appendChild(e)},startSwipes:function(){var k=this;var a=this.$slider;var f=a.getElementsByTagName("li").length-2;var b=a.parentNode.clientWidth;var l=1;o(b*l*-1);e(0);function e(t){try{for(var q=0,p=winUrlArr[l-1].length;q<p;q++){var s=new Image();if(winUrlArr[t][q]!==0){s.src=winUrlArr[t][q]}else{return}winUrlArr[t][q]=0;s.onload=s.onerror=function(){}}}catch(r){}}function i(){a.style.webkitTransition="all "+k.options.speed/1000+"s";a.style.transition="all "+k.options.speed/1000+"s"}function h(){a.style.webkitTransition="none";a.style.transition="none"}function o(p){a.style.webkitTransform="translateX("+p+"px)";a.style.transform="translateX("+p+"px)";n()}function g(){var q=document.querySelector(".item-circle").getElementsByTagName("li");for(var p=0;p<f;p++){q[p].className=""}q[l-1].className+="current";if(k.options.isSendWin){e(l-1)}}function n(){if(l>f){l=1}else{if(l<1){l=f}}g();setTimeout(function(){h()},k.options.speed)}if(this.options.interval>0){var c=setInterval(function(){l++;i();o(b*l*-1)},k.options.interval)}var j=0;var d=0;var m=false;this.bind(a,"touchstart",function(p){m=false;clearInterval(c);j=p.touches[0].clientX});this.bind(a,"touchmove",function(p){m=true;d=p.touches[0].clientX-j;o(d+l*b*-1);p.preventDefault()});this.bind(a,"touchend",function(p){if(m&&Math.abs(d)>k.options.minDistance){if(d<0){l++}else{if(d>0){l--}}}i();o(l*b*-1);c=setInterval(function(){l++;i();o(b*l*-1)},k.options.interval)})},bind:function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{a.attachEvent("on"+c,b)}}};oojs.define({name:"page",namespace:"",deps:{},sdk:{},adsExtention:[],resizeTimer:null,imageIndex:0,$page:function(){try{this.sdk=(window.baidu&&window.baidu.mobads&&window.baidu.mobads.Sdk)||(parent&&parent.baidu&&parent.baidu.mobads&&parent.baidu.mobads.Sdk);this.bindCloseHandler();if(window.adsExtention&&document.getElementById("container")){this.adClick("container",window.adsExtention)}this.containerResize()}catch(a){alert(a)}},bindCloseHandler:function(){var a=document.getElementById("closeBtn");this.bind(a,"click",function(){this.sdk.onAdPlayEnd();lunbo.stop();this.stopEvent(this)}.proxy(this))},doClose:function(){this.sdk.onAdPlayEnd();lunbo.stop();this.stopEvent(this)},adClick:function(b,e){this.adsExtention=e||window.adsExtention;b=b||"container";var a=document.getElementById(b);var f=a.getElementsByTagName("a");for(var c=0;c<f.length;c++){var d=f[c].className;if(d){d=d.toLowerCase();if(d==="gylogo"||d==="bdlogo"||d.substring(0,7)==="bd-logo"){continue}}this.bind(f[c],"click",this.onAdClick.proxy(this))}},onAdClick:function(c){var d=this.formatEventObj(c);var a=d.target;if(a.id.indexOf("closeDiv")>-1){this.doClose()}while(a.tagName.toLowerCase()!=="a"&&a.tagName.toLowerCase()!=="body"){a=a.parentNode}if(a.tagName.toLowerCase()==="body"){return false}var f=this.getAttr(a,"data-adindex");f=parseInt(f,10);var b=this.adsExtention[f];b.curl=a.href||b.curl;this.sdk.handleClick(b);lunbo.next();return this.stopEvent(c)},containerResize:function(a){if(window.innerHeight>0){var f=parseInt(window.innerWidth,10);var q=parseInt(window.innerHeight,10);var k=20;var g=navigator.userAgent.toLowerCase();var c=((g.indexOf("iphone")>-1)||(g.indexOf("ipad")>-1));var p=q/2;q=q-(c?k:0);var b=document.getElementById("container");var d=document.getElementById("itemUl");if(d.childNodes.length>1){b.style.height=q+"px";b.style.marginTop=-p+(c?k:0)+"px";b.style.marginLeft=-(f/2)+"px"}else{b.style.marginTop=(c?k:0)+"px";b.style.height=q+"px"}d.style.height=q+"px";var j=d.getElementsByTagName("li");if(j.length>1){new ImageSlider(d)}else{try{for(var l=0,n=winUrlArr[0].length;l<n;l++){var h=new Image();if(winUrlArr[0][l]!==0){h.src=winUrlArr[0][l]}else{return}winUrlArr[0][l]=0;h.onload=h.onerror=function(){}}}catch(o){}}}else{setTimeout(function(){this.containerResize()}.proxy(this),50)}},bind:function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{a.attachEvent("on"+c,b)}},getAttr:function(b,a){if(b&&b.getAttribute){return b.getAttribute(a)}else{return b[a]}},formatEventObj:function(a){a=a||window.event;a.target=a.target||a.srcElement;return a},stopEvent:function(a){if(a&&a.stopPropagation){a.stopPropagation()}if(a&&a.preventDefault){a.preventDefault()}return false}});